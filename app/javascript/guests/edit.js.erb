<% helpers = ActionController::Base.helpers %>

const AVATARS_PATH = {
  'Aragorn': "<%= helpers.image_url 'LOTR/Aragorn.png' %>",
  'Arwen': "<%= helpers.image_url 'LOTR/Arwen.png' %>",
  'Frodo': "<%= helpers.image_url 'LOTR/Frodo.png' %>",
  'Galadriel': "<%= helpers.image_url 'LOTR/Galadriel.png' %>",
  'Gandalf': "<%= helpers.image_url 'LOTR/Gandalf.png' %>",
  'Gimli': "<%= helpers.image_url 'LOTR/Gimli.png' %>",
  'Legolas': "<%= helpers.image_url 'LOTR/Legolas.png' %>",
  'Sam': "<%= helpers.image_url 'LOTR/Sam.png' %>",
  'Saruman': "<%= helpers.image_url 'LOTR/Saruman.png' %>"
}

const changeAvatar = (avatar, id) => {
  const myDiv = $(`#${id}-thumb`)
  if (avatar) {
    myDiv.css({ "background-image": `url(${AVATARS_PATH[avatar]})` })
    myDiv.addClass("avatar-picture-in-modal")
    myDiv.removeClass("avatar-no-picture-in-modal")

  }
  else {
    myDiv.css({ "background-image": "" })
    myDiv.removeClass("avatar-picture-in-modal")
    myDiv.addClass("avatar-no-picture-in-modal")

  }
}

const setAvatarPictureInModal = () => {
    $('.guest-js-avatar').each(function(i, obj) {
      var avatar = $(this).val()
      var id = $(this).attr('id')
      changeAvatar(avatar, id)
      obj.onchange = function() {
        var avatar = $(this).val()
        var id = $(this).attr('id')
        changeAvatar(avatar, id)
      }
  })
}

export { setAvatarPictureInModal };
